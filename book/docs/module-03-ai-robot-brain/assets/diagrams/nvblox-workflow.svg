<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 350" width="800" height="350">
  <defs>
    <marker id="arrowNvblox" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#333"/>
    </marker>
  </defs>

  <!-- Title -->
  <text x="400" y="30" font-family="Arial, sans-serif" font-size="18" font-weight="bold" text-anchor="middle" fill="#333">nvblox: GPU-Accelerated 3D Mapping</text>

  <!-- Inputs -->
  <rect x="30" y="70" width="100" height="60" rx="8" fill="#4CAF50"/>
  <text x="80" y="95" font-family="Arial, sans-serif" font-size="10" font-weight="bold" text-anchor="middle" fill="white">Depth</text>
  <text x="80" y="115" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="white">Image/PC</text>

  <rect x="30" y="145" width="100" height="60" rx="8" fill="#2196F3"/>
  <text x="80" y="170" font-family="Arial, sans-serif" font-size="10" font-weight="bold" text-anchor="middle" fill="white">Pose</text>
  <text x="80" y="190" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="white">TF/Odometry</text>

  <rect x="30" y="220" width="100" height="60" rx="8" fill="#FF9800"/>
  <text x="80" y="245" font-family="Arial, sans-serif" font-size="10" font-weight="bold" text-anchor="middle" fill="white">Color</text>
  <text x="80" y="265" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="white">(Optional)</text>

  <!-- Arrows to nvblox -->
  <line x1="130" y1="100" x2="200" y2="150" stroke="#333" stroke-width="2" marker-end="url(#arrowNvblox)"/>
  <line x1="130" y1="175" x2="200" y2="175" stroke="#333" stroke-width="2" marker-end="url(#arrowNvblox)"/>
  <line x1="130" y1="250" x2="200" y2="200" stroke="#333" stroke-width="2" marker-end="url(#arrowNvblox)"/>

  <!-- nvblox core -->
  <rect x="210" y="100" width="200" height="150" rx="10" fill="#9C27B0"/>
  <text x="310" y="130" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="white">nvblox</text>

  <rect x="225" y="145" width="170" height="30" rx="5" fill="rgba(255,255,255,0.2)"/>
  <text x="310" y="165" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="white">TSDF Integration (GPU)</text>

  <rect x="225" y="185" width="170" height="30" rx="5" fill="rgba(255,255,255,0.2)"/>
  <text x="310" y="205" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="white">ESDF Computation (GPU)</text>

  <rect x="225" y="225" width="170" height="20" rx="5" fill="rgba(255,255,255,0.2)"/>
  <text x="310" y="240" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="white">Mesh Extraction</text>

  <!-- Outputs -->
  <line x1="410" y1="130" x2="470" y2="90" stroke="#333" stroke-width="2" marker-end="url(#arrowNvblox)"/>
  <line x1="410" y1="175" x2="470" y2="175" stroke="#333" stroke-width="2" marker-end="url(#arrowNvblox)"/>
  <line x1="410" y1="220" x2="470" y2="260" stroke="#333" stroke-width="2" marker-end="url(#arrowNvblox)"/>

  <!-- Output: TSDF -->
  <rect x="480" y="60" width="140" height="60" rx="8" fill="#E91E63"/>
  <text x="550" y="85" font-family="Arial, sans-serif" font-size="10" font-weight="bold" text-anchor="middle" fill="white">TSDF Map</text>
  <text x="550" y="105" font-family="Arial, sans-serif" font-size="8" text-anchor="middle" fill="white">Truncated Signed</text>
  <text x="550" y="115" font-family="Arial, sans-serif" font-size="8" text-anchor="middle" fill="white">Distance Field</text>

  <!-- Output: ESDF -->
  <rect x="480" y="145" width="140" height="60" rx="8" fill="#00BCD4"/>
  <text x="550" y="170" font-family="Arial, sans-serif" font-size="10" font-weight="bold" text-anchor="middle" fill="white">ESDF Map</text>
  <text x="550" y="190" font-family="Arial, sans-serif" font-size="8" text-anchor="middle" fill="white">For path planning</text>

  <!-- Output: Mesh -->
  <rect x="480" y="230" width="140" height="60" rx="8" fill="#607D8B"/>
  <text x="550" y="255" font-family="Arial, sans-serif" font-size="10" font-weight="bold" text-anchor="middle" fill="white">Mesh</text>
  <text x="550" y="275" font-family="Arial, sans-serif" font-size="8" text-anchor="middle" fill="white">Visualization</text>

  <!-- Nav2 Integration -->
  <line x1="620" y1="175" x2="680" y2="175" stroke="#333" stroke-width="2" marker-end="url(#arrowNvblox)"/>
  <rect x="690" y="135" width="100" height="80" rx="8" fill="#F44336"/>
  <text x="740" y="165" font-family="Arial, sans-serif" font-size="10" font-weight="bold" text-anchor="middle" fill="white">Nav2</text>
  <text x="740" y="185" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="white">Costmap</text>
  <text x="740" y="200" font-family="Arial, sans-serif" font-size="8" text-anchor="middle" fill="white">Plugin</text>

  <!-- Performance -->
  <rect x="210" y="300" width="380" height="40" rx="5" fill="#f5f5f5" stroke="#ddd"/>
  <text x="400" y="325" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#333">Real-time @ 30Hz | Resolution: 5cm voxels | GPU Memory: ~1GB</text>
</svg>
