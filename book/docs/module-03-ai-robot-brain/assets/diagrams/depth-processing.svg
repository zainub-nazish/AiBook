<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 300" width="800" height="300">
  <defs>
    <marker id="arrowDepth" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#333"/>
    </marker>
  </defs>

  <!-- Title -->
  <text x="400" y="25" font-family="Arial, sans-serif" font-size="18" font-weight="bold" text-anchor="middle" fill="#333">Isaac ROS Depth Processing Pipeline</text>

  <!-- Input: Stereo Images -->
  <rect x="30" y="60" width="100" height="100" rx="8" fill="#4CAF50"/>
  <text x="80" y="95" font-family="Arial, sans-serif" font-size="11" font-weight="bold" text-anchor="middle" fill="white">Stereo</text>
  <text x="80" y="110" font-family="Arial, sans-serif" font-size="11" font-weight="bold" text-anchor="middle" fill="white">Images</text>
  <text x="80" y="135" font-family="Arial, sans-serif" font-size="8" text-anchor="middle" fill="white">sensor_msgs/</text>
  <text x="80" y="148" font-family="Arial, sans-serif" font-size="8" text-anchor="middle" fill="white">Image</text>

  <line x1="130" y1="110" x2="165" y2="110" stroke="#333" stroke-width="2" marker-end="url(#arrowDepth)"/>

  <!-- Rectification -->
  <rect x="175" y="70" width="110" height="80" rx="8" fill="#2196F3"/>
  <text x="230" y="100" font-family="Arial, sans-serif" font-size="11" font-weight="bold" text-anchor="middle" fill="white">Rectify</text>
  <text x="230" y="120" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="white">Undistort +</text>
  <text x="230" y="135" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="white">Align (GPU)</text>

  <line x1="285" y1="110" x2="320" y2="110" stroke="#333" stroke-width="2" marker-end="url(#arrowDepth)"/>

  <!-- Disparity -->
  <rect x="330" y="70" width="110" height="80" rx="8" fill="#9C27B0"/>
  <text x="385" y="100" font-family="Arial, sans-serif" font-size="11" font-weight="bold" text-anchor="middle" fill="white">Disparity</text>
  <text x="385" y="120" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="white">SGM/BM</text>
  <text x="385" y="135" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="white">(GPU)</text>

  <line x1="440" y1="110" x2="475" y2="110" stroke="#333" stroke-width="2" marker-end="url(#arrowDepth)"/>

  <!-- Depth -->
  <rect x="485" y="70" width="110" height="80" rx="8" fill="#FF9800"/>
  <text x="540" y="100" font-family="Arial, sans-serif" font-size="11" font-weight="bold" text-anchor="middle" fill="white">Depth</text>
  <text x="540" y="120" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="white">Disparity →</text>
  <text x="540" y="135" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="white">Meters</text>

  <line x1="595" y1="110" x2="630" y2="110" stroke="#333" stroke-width="2" marker-end="url(#arrowDepth)"/>

  <!-- Point Cloud -->
  <rect x="640" y="60" width="120" height="100" rx="8" fill="#F44336"/>
  <text x="700" y="95" font-family="Arial, sans-serif" font-size="11" font-weight="bold" text-anchor="middle" fill="white">Point Cloud</text>
  <text x="700" y="115" font-family="Arial, sans-serif" font-size="8" text-anchor="middle" fill="white">sensor_msgs/</text>
  <text x="700" y="130" font-family="Arial, sans-serif" font-size="8" text-anchor="middle" fill="white">PointCloud2</text>
  <text x="700" y="148" font-family="Arial, sans-serif" font-size="8" text-anchor="middle" fill="white">(GPU Memory)</text>

  <!-- Alternative: RGB-D Input -->
  <rect x="30" y="190" width="100" height="80" rx="8" fill="#00BCD4"/>
  <text x="80" y="220" font-family="Arial, sans-serif" font-size="11" font-weight="bold" text-anchor="middle" fill="white">RGB-D</text>
  <text x="80" y="240" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="white">Depth Image</text>
  <text x="80" y="255" font-family="Arial, sans-serif" font-size="8" text-anchor="middle" fill="white">(RealSense)</text>

  <line x1="130" y1="230" x2="475" y2="130" stroke="#00BCD4" stroke-width="2" stroke-dasharray="5" marker-end="url(#arrowDepth)"/>
  <text x="300" y="200" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#00BCD4">Direct depth input (skip stereo)</text>

  <!-- Performance comparison -->
  <rect x="175" y="200" width="580" height="80" rx="8" fill="#f5f5f5" stroke="#ddd"/>
  <text x="465" y="225" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#333">Performance Comparison (VGA 640x480)</text>
  <text x="300" y="250" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#F44336">CPU: ~50ms/frame</text>
  <text x="465" y="250" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#4CAF50">GPU: ~5ms/frame</text>
  <text x="630" y="250" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#2196F3">10x Speedup</text>
  <text x="465" y="270" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#666">Zero-copy GPU→GPU with NITROS (no CPU transfer)</text>
</svg>
